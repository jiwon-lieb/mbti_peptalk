
// require('dotenv').config();
const express = require('express');
const cors = require('cors');
const serverless = require('serverless-http');
const path = require('path');


const app = express();
app.use(cors());
app.use(express.static('public')); // Serve HTML files from public directory

app.get('/', (req, res) => {
  res.sendFile(path.join(__dirname, 'public', 'index.html'));
});

/**
 * Helper function to select a random element from an array.
 * @param {Array} array 
 * @returns Random element from the array
 */
const getRandomElement = (array) => array[Math.floor(Math.random() * array.length)];

/**
 * MBTI-based pep talk collections
 */
const mbtiPepTalks = {
  "INTJ": {
    "default": [
      "완벽함을 추구하는 건 좋지만, 영원히 계획만 세우다 끝날 수 있어.",
      "감정적으로 피드백을 받지 말고, 논리적으로 분석하세요.",
      "지금 하는 일이 불합리하다면, 그 불합리를 증명해 보이세요.",
      "모든 답은 논리 속에 있습니다. 감정은 일시적일 뿐입니다.",
      "전략을 바꾸는 것은 실패가 아니라, 더 나은 결정을 하는 것입니다."
    ],
    "sad": [
      "감정이 흐려질 때는, 논리를 다시 확인하는 것이 가장 안전합니다.",
      "슬픔은 정보의 왜곡을 초래할 수 있습니다. 사실에 집중하세요.",
      "잠시 쉬어도 괜찮습니다. 하지만 돌아올 때는 더 날카로워지세요.",
      "감정이 논리를 방해할 때, 명확한 데이터를 확인하세요.",
      "이 또한 지나갑니다. 논리의 세계에서는 항상 해답이 있습니다."
    ],
    "angry": [
      "분노는 에너지입니다. 그 에너지를 문제 해결에 사용하세요.",
      "논리로 대응할 수 없는 문제는 존재하지 않습니다.",
      "분노는 지적 사고의 적입니다. 객관성을 유지하세요.",
      "당신의 인내는 전략의 일부입니다. 감정에 휘둘리지 마세요.",
      "냉철함은 승리를 가져옵니다. 감정을 정리하고 다시 시작하세요."
    ]
  },
  "ENFP": {
    "default": [
      "넌 진짜 멋져. 그리고 그 멋짐은 누구도 따라 할 수 없어.",
      "오늘의 넌 어제의 너보다 훨씬 더 강해졌어. 매일 성장 중이야!",
      "세상이 널 감당할 준비가 안 됐어. 넌 그만큼 특별해!",
      "넌 오늘도 예쁘고, 똑똑하고, 강하고, 다 해!",
      "모든 시작은 두려운 법이야. 하지만 넌 이미 시작했어!"
    ],
    "sad": [
      "아이고, 많이 힘들었구나. 내 어깨 빌려줄게.",
      "오늘 하루 너무 고생했어. 그 자체로도 충분히 잘하고 있어.",
      "괜찮아, 괜찮아. 울어도 돼. 다 지나갈 거야.",
      "넌 충분히 사랑받을 자격이 있어. 스스로에게도 사랑을 주세요.",
      "힘들 땐 나를 불러. 난 언제든 너의 편이야."
    ],
    "angry": [
      "아니, 누가 우리 ENFP 화나게 했어? 나한테 말해봐.",
      "화났어도 괜찮아. 그만큼 넌 소중한 존재라는 증거야.",
      "내가 옆에 있어줄게. 그 마음 다 이해해.",
      "불편한 감정도 중요한 신호야. 잘 느끼고 해소해보자.",
      "화를 풀기 위해 뭐든 말해봐. 난 다 들어줄게."
    ]
  },
  "INFJ": {
    "default": [
      "당신의 직관이 항상 옳지는 않지만, 중요한 순간에 빛을 발합니다.",
      "모두를 돕고 싶겠지만, 당신의 에너지를 먼저 지키세요.",
      "당신의 마음속 깊은 곳에는 세상을 바꿀 수 있는 힘이 있습니다.",
      "보이지 않는 가치를 알아보는 당신의 능력은 특별합니다.",
      "자신을 믿으세요. 이미 그 믿음의 가치가 충분히 입증됐습니다."
    ],
    "sad": [
      "오늘 하루 힘들었나요? 당신의 내면의 목소리를 들어보세요. 그곳에 해답이 있어요.",
      "모든 사람이 당신을 이해할 순 없지만, 당신은 항상 특별합니다.",
      "가끔은 남의 감정보다 자신의 감정을 더 소중히 여겨야 합니다.",
      "지금 잠시 쉬어가도 괜찮습니다. 깊은 생각도 때로는 휴식이 필요합니다.",
      "당신의 따뜻함은 절대 사라지지 않습니다. 그것이 당신의 진정한 힘입니다."
    ],
    "angry": [
      "당신의 분노는 세상을 바꾸고 싶다는 강렬한 의지일 수 있습니다.",
      "화가 날 때, 당신의 직관을 믿어보세요. 그것이 길을 제시할 겁니다.",
      "모든 사람을 구할 수는 없습니다. 당신도 스스로를 구할 자격이 있습니다.",
      "당신의 분노를 무시하지 마세요. 그것은 변화의 시작일 수 있습니다.",
      "분노가 아닌 인내로 해결할 수 있는 일이 더 많습니다."
    ]
  },
  "ENTJ": {
    "default": [
      "모든 계획은 실행할 때 의미가 있습니다. 지금 행동하세요.",
      "리더는 지시하는 사람이 아니라, 영감을 주는 사람입니다.",
      "빠른 결정이 항상 좋은 결정은 아니니, 신중함도 전략입니다.",
      "리더십은 통제가 아니라, 믿음을 주는 것입니다.",
      "당신의 비전이 타인의 비전과 다를 수 있음을 인정하세요."
    ],
    "sad": [
      "리더도 때로는 지칠 수 있습니다. 잠시 쉬어가도 괜찮아요.",
      "당신의 팀은 당신만의 책임이 아닙니다. 다른 사람들에게도 도움을 요청해보세요.",
      "당신이 쌓아온 모든 경험이 당신을 지금 이 자리에 있게 했습니다.",
      "지금 멈추더라도, 그건 다시 시작하기 위함일 뿐입니다.",
      "오늘 하루 힘들었다면, 내일은 더 강해진 당신을 만날 겁니다."
    ],
    "angry": [
      "분노는 냉정한 리더십의 적입니다. 객관적인 관점을 유지하세요.",
      "지금 결정을 내리기 전에 한 발짝 물러나 보세요.",
      "지금 화를 내면 팀의 신뢰를 잃을 수 있습니다. 이성을 유지하세요.",
      "분노를 동기부여로 바꾸세요. 그게 리더의 방식입니다.",
      "누군가 당신의 리더십에 도전한다면, 그들의 관점을 들어보는 것도 필요합니다."
    ]
  },
  "INFP": {
    "default": [
      "세상이 어떻게 돌아가든, 당신의 내면의 가치는 절대 변하지 않습니다.",
      "당신의 감정은 소중합니다. 그 감정을 무시하지 마세요.",
      "가끔은 세상을 바꾸려는 꿈을 꾸는 것만으로도 충분합니다.",
      "당신의 창의력과 상상력은 그 누구도 모방할 수 없는 보물입니다.",
      "세상은 가끔 차갑게 느껴지지만, 당신의 따뜻함은 그걸 이길 겁니다."
    ],
    "sad": [
      "지금은 세상이 어둡게 느껴질 수 있습니다. 하지만 그 어둠 속에서도 빛을 찾을 수 있습니다.",
      "오늘 하루는 잠시 멈추고 자신을 돌봐도 괜찮습니다.",
      "당신의 감정은 소중한 신호입니다. 그 신호를 무시하지 마세요.",
      "힘들 때는 스스로에게 더 친절해져야 합니다.",
      "당신의 내면의 목소리를 무시하지 마세요. 그곳에 진짜 해답이 있습니다."
    ],
    "angry": [
      "분노도 소중한 감정입니다. 그것이 변화를 이끌 수 있습니다.",
      "당신의 분노는 다른 사람에게 알려주는 신호일 수 있습니다.",
      "화를 내도 괜찮습니다. 그 감정도 존중받을 자격이 있습니다.",
      "분노를 예술로 바꿀 수 있는 능력이 당신에겐 있습니다.",
      "감정을 무시하지 마세요. 그 감정은 당신의 내면의 소리입니다."
    ]
  },
  "ENFP": {
    "default": [
      "세상이 널 감당할 준비가 안 됐어. 넌 그만큼 특별해!",
      "오늘의 넌 어제의 너보다 훨씬 더 강해졌어. 매일 성장 중이야!",
      "넌 진짜 멋져. 그리고 그 멋짐은 누구도 따라 할 수 없어.",
      "세상에 하나뿐인 원본이야. 복제 불가, 유니크 그 자체!",
      "네가 원한다면 세상도 네 편이 될 거야!"
    ],
    "sad": [
      "오늘 하루 많이 힘들었구나. 내 어깨 빌려줄게.",
      "괜찮아, 괜찮아. 울어도 돼. 다 지나갈 거야.",
      "너의 빛나는 에너지는 지금 잠시 쉬고 있을 뿐이야. 다시 빛날 거야.",
      "세상이 널 몰라봐도 괜찮아. 넌 스스로를 알아주면 돼.",
      "슬픔은 언제나 지나갑니다. 당신의 에너지는 다시 돌아올 거예요."
    ],
    "angry": [
      "아니, 누가 우리 ENFP 화나게 했어? 나한테 말해봐.",
      "화를 내고 싶다면 마음껏 내도 돼. 하지만 넌 그 이상의 사람이야.",
      "너의 분노는 변화를 일으키는 강력한 에너지일 수 있어. 잘 활용해봐.",
      "화가 났다면, 그 감정을 기록해보세요. 거기서 새로운 아이디어가 나올 수 있어요.",
      "불편한 감정도 중요한 신호야. 잘 느끼고 해소해보자."
    ]
  },
  "ISFP": {
    "default": [
      "모든 예술 작품에는 당신만의 색깔이 들어갑니다. 그게 당신의 매력입니다.",
      "자신만의 속도로 나아가도 괜찮아요. 남들과 비교할 필요는 없습니다.",
      "조용히 강한 사람이 진짜 강한 사람입니다. 바로 당신처럼요.",
      "세상이 당신의 예술을 이해하지 못해도, 그 가치는 변하지 않습니다.",
      "당신의 감정은 작품의 일부입니다. 그 감정을 소중히 여기세요."
    ],
    "sad": [
      "예술가는 고독할 때 더 아름다운 작품을 만듭니다. 지금이 바로 그 순간일지도 모릅니다.",
      "지금 힘들다면, 잠시 쉬어도 괜찮습니다. 스스로에게 휴식을 주세요.",
      "아무것도 하지 않는 것도 하나의 예술입니다. 충분히 잘하고 있습니다.",
      "지금 느끼는 모든 감정은 언젠가 예술로 승화될 것입니다.",
      "마음이 아플 때는, 그 감정을 받아들이고 다독여주세요."
    ],
    "angry": [
      "분노는 당신의 예술에 강렬한 감정을 불어넣을 수 있습니다.",
      "화를 내고 싶다면 예술로 표현해보세요. 그것이 치유가 될 겁니다.",
      "화난 자신을 비난하지 마세요. 그 감정도 소중한 일부입니다.",
      "분노가 치밀어 오를 땐, 잠시만 멈추고 숨을 크게 쉬어보세요.",
      "당신의 감정은 작품의 원동력입니다. 그 에너지를 잘 활용해보세요."
    ]
  },
  "ESFP": {
    "default": [
      "지금 이 순간을 즐기는 건 당신의 특권입니다.",
      "당신의 웃음소리는 사람들에게 에너지를 줍니다.",
      "오늘 하루도 멋진 순간들로 가득할 거예요.",
      "지금이 아니면 언제 즐기겠어요? 마음껏 즐기세요!",
      "당신의 유쾌함은 사람들을 행복하게 만듭니다."
    ],
    "sad": [
      "오늘 하루 힘들었다고요? 그럼 잠시 춤을 춰보는 건 어때요?",
      "당신이 웃음을 잃어도 괜찮아요. 내일은 다시 웃을 수 있을 겁니다.",
      "오늘 하루 고생했어요. 가끔은 울어도 괜찮아요.",
      "슬플 때는 당신이 가장 좋아하는 음악을 틀어보세요.",
      "당신의 에너지는 끝나지 않았습니다. 잠시 충전하면 다시 돌아올 겁니다."
    ],
    "angry": [
      "지금 화가 났나요? 그럼 그 에너지로 춤을 춰보세요!",
      "분노는 당신을 더 강하게 만들 수 있습니다. 그 에너지를 활용하세요.",
      "지금은 화가 나겠지만, 잠시 멈추고 생각해보세요. 더 좋은 방법이 있을 겁니다.",
      "분노는 때때로 최고의 동기부여가 됩니다.",
      "화를 내고 싶다면 소리를 지르지 말고 크게 노래해보세요."
    ]
  },
  "INTP": {
    "default": [
      "완벽한 이론만 추구하다가는 실천할 기회를 놓칠 수 있습니다.",
      "모든 가설이 맞는 건 아니지만, 틀린 가설도 배움을 제공합니다.",
      "세상은 이론으로만 설명되지 않습니다. 행동으로 증명해야 할 때도 있습니다.",
      "지적 대화는 좋지만, 때로는 단순한 답이 더 나을 수 있습니다.",
      "논리적 사고는 강력한 무기이지만, 때론 직감도 신뢰해보세요."
    ],
    "sad": [
      "실수했다고요? 괜찮아요. 모든 위대한 발견은 실수에서 시작됐습니다.",
      "지금 느끼는 슬픔도 분석해보세요. 그 안에 해답이 있을지도 모릅니다.",
      "완벽함을 추구하지 않아도 됩니다. 이미 충분히 잘하고 있습니다.",
      "세상이 당신의 아이디어를 알아주지 않더라도, 언젠가는 인정받을 겁니다.",
      "지금은 잠시 쉬어도 괜찮아요. 뇌도 가끔은 재부팅이 필요합니다."
    ],
    "angry": [
      "논리적 사고는 화를 가라앉히는 가장 강력한 방법입니다. 증거를 찾아보세요.",
      "분노는 더 나은 시스템을 만드는 동력이 될 수 있습니다. 사용해보세요.",
      "지금 분노하는 그 문제, 차근차근 논리로 쪼개어 해결할 수 있습니다.",
      "즉흥적으로 화를 내기보다는, 가장 논리적인 방식으로 대처해보세요.",
      "분노는 뇌에 과부하를 줄 수 있습니다. 잠시 숨을 고르고 다시 접근해보세요."
    ]
  },
  "ENTP": {
    "default": [
      "아이디어가 아무리 많아도 실행하지 않으면 무의미합니다.",
      "모든 아이디어가 다 좋은 건 아닙니다. 걸러내는 능력도 필요합니다.",
      "말이 많다고 아이디어가 좋은 건 아닙니다.",
      "끊임없이 새로움을 추구하다가 아무것도 완성하지 못할 수 있습니다.",
      "변명은 멋진 아이디어의 무덤입니다. 바로 실행하세요."
    ],
    "sad": [
      "슬퍼도 창의력은 죽지 않습니다. 새로운 프로젝트를 구상해보세요.",
      "아이디어는 감정에 따라 변하지 않습니다. 당신의 아이디어는 여전히 훌륭합니다.",
      "지금은 쉬어가도 괜찮아요. 천재도 쉬는 시간이 필요합니다.",
      "슬퍼하는 동안에도 머리는 계속 아이디어를 생성합니다.",
      "감정이 가라앉으면 더 좋은 아이디어가 떠오를 거예요."
    ],
    "angry": [
      "화가 난다면 새로운 아이디어 하나를 더 만들어보세요.",
      "분노는 창의력의 불씨입니다. 불을 지피세요.",
      "불만을 말하는 것도 창의력의 일부입니다. 개선안을 함께 생각해봐요.",
      "화가 날 땐 더 뛰어난 아이디어가 나오기도 합니다.",
      "당신의 분노는 변화를 일으킬 원동력입니다. 사용하세요."
    ]
  },
  "ISFJ": {
    "default": [
      "누군가를 돕는 것도 좋지만, 스스로를 먼저 돌보세요.",
      "과도한 책임감이 당신을 지치게 할 수 있습니다.",
      "자신의 감정도 소중히 여겨야 합니다.",
      "모두의 행복을 책임질 필요는 없습니다.",
      "당신의 배려는 많은 사람들에게 위안이 됩니다."
    ],
    "sad": [
      "너는 여전히 따뜻하고 멋진 사람이야. 그건 절대 안 없어지는 거야.",
      "지금 슬프더라도, 약속할게. 분명히 나아질 거야.",
      "노력이 당장 눈에 보이지 않더라도, 분명히 결실을 맺을거야.",
      "힘든 날에도 당신은 여전히 사람들에게 힘이 됩니다.",
      "오늘 하루 고생했어요. 조금만 더 버텨봐요."
    ],
    "angry": [
      "화가 날 때는 한 발 물러나고 심호흡을 하세요.",
      "당신의 화는 중요합니다. 그것도 하나의 신호입니다.",
      "괜찮아요. 화날 때도 있습니다. 천천히 다시 시작합시다.",
      "당신의 목소리는 중요합니다. 말하고 싶을 때 말하세요.",
      "진정하고 나면 더 나은 결정을 할 수 있습니다."
    ]
  },
  "ESFJ": {
    "default": [
      "모두를 만족시키려고 하지 마세요. 당신의 행복도 중요합니다.",
      "누군가를 돕는 건 멋진 일이지만, 자신을 돌보는 것도 잊지 마세요.",
      "오늘도 당신 덕분에 누군가는 웃고 있을 거예요.",
      "사람들이 당신의 진심을 몰라준다고 느낄 때도 있지만, 결국엔 모두 알게 될 거예요.",
      "당신의 따뜻함은 세상을 더 나은 곳으로 만듭니다."
    ],
    "sad": [
      "오늘 하루 많이 힘들었죠? 여기서 잠시 쉬어가도 괜찮아요.",
      "너무 많은 걸 짊어지고 있지 않나요? 가끔은 내려놔도 됩니다.",
      "괜찮아요. 당신의 노력은 분명히 누군가의 마음에 닿았을 거예요.",
      "당신이 해온 모든 것을 잊지 마세요. 이미 충분히 잘하고 있습니다.",
      "오늘 하루 눈물 흘려도 괜찮아요. 그 눈물이 더 강한 내일을 만듭니다."
    ],
    "angry": [
      "모두가 당신을 이해해주지 않더라도, 당신의 감정은 정당합니다.",
      "속상할 때는 크게 소리 내어 말해도 괜찮아요. 감정은 억누르는 게 아닙니다.",
      "사람들이 당신을 속상하게 한다면, 그 사람들과 거리를 두어도 됩니다.",
      "지금 화났다면, 잠시 걸어 나와서 심호흡을 해보세요.",
      "당신의 분노는 당신이 소중하다는 신호일 수 있습니다. 스스로를 소중히 여겨주세요."
    ]
  },
  "ISTJ": {
    "default": [
      "지금 하는 모든 일들이 미래의 성공으로 이어질 것입니다.",
      "당신의 책임감과 신뢰는 모든 팀의 핵심입니다.",
      "한 발짝씩 나아가는 것이 가장 강력한 전략입니다.",
      "정확하고 꼼꼼한 당신의 노력은 결코 헛되지 않습니다.",
      "오늘의 작은 승리들이 내일의 큰 성공을 만듭니다."
    ],
    "sad": [
      "지금 잠시 멈춰도 괜찮아요. 당신은 다시 시작할 수 있는 힘이 있습니다.",
      "누구보다도 노력하는 당신이기에, 반드시 좋은 결과가 나올 겁니다.",
      "모든 것을 책임질 필요는 없습니다. 도움을 받아도 괜찮아요.",
      "지금 힘들어도, 곧 더 나아질 겁니다. 당신의 인내는 강합니다.",
      "완벽하지 않아도 괜찮아요. 이미 충분히 잘하고 있습니다."
    ],
    "angry": [
      "논리가 이기는 법입니다. 감정에 휘둘리지 마세요.",
      "격분하기 전에 잠시 멈추고, 다시 전략을 세우세요.",
      "지금 화가 나더라도, 그걸 현명하게 사용하는 것이 더 강력합니다."
    ]
  },
  "ESTJ": {
    "default": [
      "일을 미루지 마세요. 지금 해내는 것이 미래의 자신을 돕는 일입니다.",
      "강한 리더십을 발휘하되, 다른 사람의 의견도 들어보세요.",
      "명확한 계획과 강력한 실행력, 당신에겐 이미 다 있습니다.",
      "고난을 피하지 않는 사람이 진정한 리더입니다.",
      "오늘의 선택이 내일의 결과를 만듭니다. 지금 결정하세요."
    ],
    "sad": [
      "완벽해지려고 하지 마세요. 충분히 잘하고 있습니다.",
      "모두의 짐을 혼자 짊어질 필요는 없습니다. 도움을 요청해도 괜찮아요.",
      "지금 당장은 벅찰 수 있어요. 하지만 이 어려움도 곧 지나갈 겁니다.",
      "책임을 다하려고 애쓰는 당신의 노력이 대단합니다. 스스로에게 인정해 주세요.",
      "오늘 하루 아무것도 하지 않아도 괜찮아요. 내일은 다시 해낼 수 있어요."
    ],
    "angry": [
      "화를 내기 전에, 이 상황이 정말 중요한지 한 번 더 생각해보세요.",
      "리더는 모든 것을 통제할 수 없습니다. 통제할 수 없는 것은 내려놓으세요.",
      "격분할 때는 잠시 걸어 나와서 머리를 식히세요. 더 나은 결정을 할 수 있습니다.",
      "당신의 분노는 중요한 문제를 해결하고자 하는 의지의 표현일 수 있습니다.",
      "누군가가 당신의 가치를 몰라본다면, 그 사람에게 설명할 필요는 없습니다. 당신의 가치는 변하지 않으니까요."
    ]
  },
  "ISTP": {
    "default": [
      "생각보다 더 많은 문제를 해결할 수 있는 능력이 당신에겐 있습니다.",
      "말보다는 행동이 더 강력합니다. 당신은 이미 그것을 잘 알고 있습니다.",
      "완벽한 해결책이 아니어도 괜찮습니다. 일단 시작해보세요.",
      "문제를 단순화하면 답이 보일 겁니다. 직관을 믿어보세요.",
      "언제나 독립적으로 일을 해내는 당신의 능력은 모두가 부러워합니다."
    ],
    "sad": [
      "가끔은 논리보다는 감정을 인정하는 것도 필요합니다. 스스로에게 관대해지세요.",
      "오늘 하루 정말 고생했어요. 조금 쉬어도 괜찮습니다.",
      "실패는 새로운 시도를 위한 교훈일 뿐입니다. 다시 도전하면 됩니다.",
      "자신이 부족하다고 느껴질 때, 과거에 해낸 성과를 다시 떠올려 보세요.",
      "지금 당신에게 필요한 건 잠시의 휴식일 수 있습니다. 그 후엔 더 강해질 거예요."
    ],
    "angry": [
      "문제를 풀기 어려울 때, 가끔은 잠시 거리를 두고 보는 것도 방법입니다.",
      "분노는 당신이 변화하고 싶어 한다는 신호일 수 있습니다. 변화를 위해 그 에너지를 사용해보세요.",
      "화를 내는 건 잘못된 게 아닙니다. 그 화를 어떻게 다루느냐가 중요합니다.",
      "직접적으로 해결할 수 없는 문제라면, 다른 방법을 찾아보세요. 해결책은 늘 있습니다.",
      "누군가의 무례한 행동에 즉각 반응하기보다는, 냉정한 태도를 유지하세요. 그게 더 강합니다."
    ]
  },
  "ENFJ": {
  "default": [
    "당신의 리더십은 모두에게 영감을 줍니다. 지금도 누군가가 당신을 보고 있습니다.",
    "당신의 따뜻한 말 한마디가 누군가의 하루를 바꿀 수 있습니다.",
    "다른 사람의 감정을 잘 이해하는 능력은 선물이자 무기입니다.",
    "팀의 분위기를 바꾸는 건 결국 당신의 따뜻한 리더십입니다.",
    "사람들은 당신이 생각하는 것보다 훨씬 더 당신을 신뢰하고 있습니다."
  ],
  "sad": [
    "리더도 지칠 수 있습니다. 오늘은 잠시 멈추고 충전하는 날로 하세요.",
    "당신이 없으면 세상이 멈추는 것처럼 느껴질 수 있지만, 사실 그렇지 않습니다. 쉬어도 됩니다.",
    "너무 많은 걸 떠안고 있나요? 스스로에게도 자비를 베풀어주세요.",
    "당신이 주는 에너지는 소중합니다. 당신도 그 에너지를 다시 받아야 합니다.",
    "오늘은 조금 더 천천히 걸어도 괜찮습니다. 아무도 당신을 재촉하지 않습니다."
  ],
  "angry": [
    "분노는 때로 변화를 이끌어내는 가장 강력한 감정입니다. 그 에너지를 전략적으로 사용해보세요.",
    "화가 난 당신은 누구보다도 강력합니다. 하지만 그 에너지를 지혜롭게 활용해야 합니다.",
    "분노가 날 때는, 당신의 직감을 신뢰하세요. 그 직감이 때로는 정확합니다.",
    "당신이 느끼는 불공평함은 더 나은 시스템을 만들 수 있는 신호일지도 모릅니다.",
    "리더로서 분노를 어떻게 다루느냐에 따라, 더 큰 신뢰를 얻을 수 있습니다."
  ]
},
  "ESTP": {
    "default": [
      "세상은 당신의 무대를 기다리고 있습니다. 지금이 바로 그 순간입니다.",
      "모든 기회를 잡으려고 하지 마세요. 가장 중요한 것에 집중하세요.",
      "즉흥적인 결정이 나쁠 때도 있지만, 당신의 본능은 종종 옳습니다.",
      "문제가 생기면 당황하지 마세요. 그건 새로운 기회일 수도 있습니다.",
      "빠른 행동이 항상 승리를 가져다주지는 않지만, 당신에겐 유리할 때가 많습니다."
    ],
    "sad": [
      "멈추고 싶을 땐 잠시 멈춰도 괜찮아요. 당신의 무대는 항상 준비되어 있습니다.",
      "모든 걸 한 번에 해결할 필요는 없습니다. 하나씩 해도 충분히 잘할 수 있어요.",
      "자신을 너무 몰아세우지 마세요. 당신의 속도에 맞춰도 충분합니다.",
      "오늘 힘들었어도, 내일은 더 멋진 기회가 기다리고 있을 겁니다.",
      "당신의 능력은 절대 사라지지 않습니다. 잠시 충전해보세요."
    ],
    "angry": [
      "즉흥적인 행동이 문제를 더 크게 만들 수 있습니다. 잠시 멈추고 생각해보세요.",
      "분노의 에너지를 더 나은 방향으로 돌려보세요. 새로운 아이디어가 떠오를 수 있습니다.",
      "충동적인 결정보다는 전략적인 결정을 내려보세요. 그게 더 강합니다.",
      "지금 불공평하다고 느끼더라도, 더 나은 위치에서 다시 시작할 수 있습니다.",
      "당신의 직감은 강력합니다. 하지만 감정이 지배할 때는 직감을 의심해보세요."
    ]
  }
};

// Route for MBTI pep talks
app.get('/api/peptalk/:mbti', (req, res) => {
  const { mbti } = req.params;
  const mood = req.query.mood || 'default'; // Get mood from query params (e.g., ?mood=sad)
  const mbtiUpper = mbti.toUpperCase();

  if (!mbtiPepTalks[mbtiUpper]) {
    return res.status(404).json({ error: 'MBTI type not found' });
  }

  const pepTalks = (mbtiPepTalks[mbtiUpper] && mbtiPepTalks[mbtiUpper][mood]) 
  ? mbtiPepTalks[mbtiUpper][mood] 
  : mbtiPepTalks[mbtiUpper]['default'];
  const randomPepTalk = getRandomElement(pepTalks);

  res.json({ 
    type: mbtiUpper, 
    mood: mood,
    message: randomPepTalk 
  });
});

// Serve the index.html file at the root route
app.get('/', (req, res) => {
  res.sendFile(path.join(__dirname, 'public', 'index.html'));
});


// Start the server
// export const handler = serverless(api);
module.exports.handler = serverless(app);